#!/usr/bin/env node

const run = require('../src/run');

setTimeout(() => {
    process.exit();
}, 10000);

const main = async () => {
    const argv = require('yargs')
        .option('verbosity', { alias: 'v', default: 'bare' })
        .option('browser', { alias: 'b', default: 'headless' })
        .option('threads', { alias: 't', default: false })
        .option('cwd', { alias: 'w', default: process.cwd() })
        .option('data', { alias: 'd', default: {} }).argv;

    const pattern = argv._[0] || './test/**/*.spec.js';
    await run({ pattern, ...argv });
    process.exit();
};

main();
